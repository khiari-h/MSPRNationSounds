"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[762],{762:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(43),c=a(678),s=a(850),n=a(581),i=a(643),l=a(235),d=a(443),u=a(85),o=a(579);const f=e=>{let{apiEndpoint:t="/api/wordpress/concerts"}=e;const[a,f]=(0,r.useState)([]),[h,p]=(0,r.useState)({date:"",heuredebut:"",lieu:"",type:""}),[m,g]=(0,r.useState)(1),[y,b]=(0,r.useState)(6),[x,j]=(0,r.useState)(!0),w=(0,r.useRef)(null);(0,u._)(b),(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,l.Z)("concerts",t,3600),a=await Promise.all(e.map((async e=>{if(e.acf.photo){const t=await(0,l.Z)(`logo_${e.acf.photo}`,`/api/wordpress/media/${e.acf.photo}`,3600);e.acf.photo=t.source_url}return e.acf.date=(0,d.Y)(e.acf.date),e.acf.heuredebut=(0,d.f)(e.acf.heuredebut),e.acf.heurefin=(0,d.f)(e.acf.heurefin),e})));f(a)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des concerts!",e)}finally{j(!1)}})()}),[t]);const $=a.filter((e=>(""===h.date||e.acf.date===h.date)&&(""===h.heuredebut||e.acf.heuredebut===h.heuredebut)&&(""===h.lieu||e.acf.lieu===h.lieu)&&(""===h.type||e.acf.type===h.type))),A=m*y,C=A-y,S=$.slice(C,A),k=Math.ceil($.length/y);return(0,o.jsxs)("section",{className:"container mx-auto py-8","aria-labelledby":"concerts-programming-heading",children:[(0,o.jsx)(s.A,{content:"Programmation des Concerts",type:"h1",className:"text-concert-title text-center",id:"concerts-programming-heading"}),x?(0,o.jsx)("p",{children:"Chargement des concerts..."}):(0,o.jsx)(o.Fragment,{children:0===$.length?(0,o.jsx)("p",{children:"Aucun concert trouv\xe9 avec les crit\xe8res s\xe9lectionn\xe9s."}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.A,{data:a.map((e=>({date:e.acf.date,heuredebut:e.acf.heuredebut,lieu:e.acf.lieu,type:e.acf.type}))),filters:h,filterKeys:["date","heuredebut","lieu","type"],handleFilterChange:(e,t)=>{p((a=>({...a,[e]:t})))},resetFilters:()=>p({date:"",heuredebut:"",lieu:"",type:""})}),(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",tabIndex:"-1",ref:w,"aria-label":"Liste des concerts",children:S.map(((e,t)=>(0,o.jsx)(c.A,{title:e.acf.nom,description:e.acf.description,image:e.acf.photo||"default.jpg",additionalInfo:`Date: ${e.acf.date}, Heure de d\xe9but: ${e.acf.heuredebut}, Heure de fin: ${e.acf.heurefin}, Lieu: ${e.acf.lieu}, Type: ${e.acf.type}`,type:"program"},t)))}),(0,o.jsx)("div",{className:"flex justify-center mt-4",children:Array.from({length:k},((e,t)=>(0,o.jsx)(i.A,{onClick:()=>g(t+1),label:String(t+1),className:"mx-1"},t+1)))})]})})]})}}}]);
//# sourceMappingURL=762.df05d242.chunk.js.map